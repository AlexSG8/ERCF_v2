<p align="center"><img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Brain_Logo.png" width="150" height="150">
<h1 align="center">The "Filamentalist" Passive Filament Driven Rewinder</h1>


[<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_render2.png" width="250" height="375">](https://github.com/Enraged-Rabbit-Community/ERCF_v2/tree/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_Classic_Rewinder)[<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/FV3/Filamentalist_V3_Render_Large.png" width="375" height="375">](https://github.com/Enraged-Rabbit-Community/ERCF_v2/tree/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_FV3_Rewinder)[<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Enclosure/Enclosure_Render.PNG" width="375" height="375">](https://github.com/Enraged-Rabbit-Community/ERCF_v2/tree/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_Enclosure)
</p>
   
## _____ [Filamentalist "Classic"](https://github.com/Enraged-Rabbit-Community/ERCF_v2/tree/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_Classic_Rewinder) _________ [Filamentalist FV3](https://github.com/Enraged-Rabbit-Community/ERCF_v2/tree/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_FV3_Rewinder) ___________[Filamentalist Enclosure](https://github.com/Enraged-Rabbit-Community/ERCF_v2/tree/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_Enclosure) ____
</p>

## Filamentalist Discord group [here:](https://discord.gg/zHGH9sXFVK) ##


## <img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Brain_Logo.png" width="50" height="60"> Description & Theory of operation:

The Filamentalist is a passive (no motors or electronics required) integrated buffering and spool holding multi-material unit (MMU) solution, providing space savings and potential filament path reduction and the associated drag/resistance that comes with long runs from spool to buffer to MMU.

- The Filamentalist uses the axial force delivered by the MMU gear motor along the filament to load and unload to and from the filament spool.
- An adjustable spring clamp forces the filament against two o-rings that sit on the drive pulley to create a high traction interface for rotating the axle and filament spool.
- A one-way clutch style bearing locks against the drive shaft and rotates the filament spool to take up filament during an unload.
- For loading and print extruding, the clutch disengages allowing for effective free-spooling of the filament spool similar to a roller style spool holder.
- The difference in diameter of the filament driven clutched roller versus the larger rim roller that the filament spool sits on provides the needed gear ratio to produce enough rotations to take up, and unload a nearly empty or full filament roll.
- During unloading/buffering, to account for the varying diameter of a spool from full to empty, filament tension will cause the spring loaded arm to lift a small amount and release traction from the o-rings allowing slip to occur between the filament and the o-ring interface of the rewinder producing a dynamic, continuously modulating variable gear ratio (full spool = max slip, empty spool = no/minimal slip).


<p align="center">
<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/FV3/TOC.png" width="350" height="275">
</p>



<p align="center"><img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Front.jpg" width="350" height="300">
<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Top.jpg" width="300" height="300">
<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_6_Color.jpg" width="350" height="300">
</p>

## Filamentalist Version Selection ##

One version is not necessarily better than the other.  The Filamentalist Classic has slightly better Tensioner system geometry making it a bit smoother in the filament grip/slip modulation.  The FV3 is "sexier" and accomodates wider spool widths in less horizontal space which can be useful for fitting in existing enclosures or accros the top of a printer.  Below is a selection table to help wit you decision.



## [Filamentalist Classic Assembly Guide Document](https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/a68bc6678bab41d7bded5e42a17276a9430a0f45/Recommended_Options/Filamentalist_Rewinder/Filamentalist_Classic/Documentation/Filamentalist_Rewinder_Manual_V3.1.2.pdf)  [<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist RC2 Manual_Cover.jpg" width="150" height="100">](https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/a68bc6678bab41d7bded5e42a17276a9430a0f45/Recommended_Options/Filamentalist_Rewinder/Filamentalist_Classic/Documentation/Filamentalist_Rewinder_Manual_V3.1.2.pdf)

## [Filamentalist FV3 Assembly Guide Document](https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/4648ff0c2f5a9ee3f4b7aded86e414564832cd24/Recommended_Options/Filamentalist_Rewinder/Filamentalist_FV3/Documentation/Filamentalist_V3_Manual_V1.0.pdf)  [<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/d2b144ee8d95d24b84439ef060b2681a3b5932ac/Recommended_Options/Filamentalist_Rewinder/Filamentalist_FV3/Assets/FV3%20Manual.png" width="150" height="100">](https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/d2b144ee8d95d24b84439ef060b2681a3b5932ac/Recommended_Options/Filamentalist_Rewinder/Filamentalist_FV3/Assets/FV3%20Manual.png)


## [Filamentalist Classic Assembly Guide Video](https://youtu.be/-1cHOcnosxE?si=RZV318OI9f3f_CkE)  [<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist Assembly Video Thumbnail.jpg" width="150" height="100">](https://youtu.be/-1cHOcnosxE?si=RZV318OI9f3f_CkE)


## Video of 6 rewinders swapping (plus SW Only Blobifier Purging):  [<img src="https://github.com/SkiBikePrint/Filamentalist/blob/7042b9b10466e7a60b45ed23568b3a78ff5930b9/Assets/Swap_Video.jpg" width="100" height="100">](https://photos.app.goo.gl/hKso7JYPZcdRLKrW8)


## [Video of loading a spool (pre-gate sensors auto-detect filament and pull into ERCF):](https://photos.app.goo.gl/yGS7Rr49dFMvjNLF9)  [<img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/0b776b2135c37ffe00467f2f5e31c06634e68210/Recommended_Options/Filamentalist_Rewinder/User_Mods/Filamentalist_Enclosure/Assets/20240615_221938.jpg" width="100" height="100">](https://photos.app.goo.gl/yGS7Rr49dFMvjNLF9)

## <img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Brain_Logo.png" width="50" height="60"> Credits:
Discord user Thisiscam first made me aware of [Muzi Xiaoyang's video](https://www.bilibili.com/video/BV1ZM41197fX/?spm_id_from=333.337.search-card.all.click) of a filament driven rewinder .  Through a long collaboration with Thisiscam, a great Beta dev/test team, and many design iterations/improvements on the Muzi Xiaoyang design, the Filamentalist was born. Key changes to the Muzi Xiaoyang design include incorporation of a one-way bearing, establishing the correct gear ratio for operation across the range of empty-to-full spools, and the long-life o-ring based filament clamping interface.

A special mention and thanks goes out to Cheesefrog and JCPhlux for their innovation and inputs for design refinement. 

## <img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Brain_Logo.png" width="50" height="60"> **Additional Notes/Considerations** 

Things that you need to know include:
1. Due to continual evolution of the design based on user feedback, the pictures in the readme files and documentation may not always reflect the most current designs.  They will be similar and generally represent the latest parts and assemblies.
2. There are multiple options for the Filamentalist.  Determine which versions/options you want and select the stl's to print accordingly.  If you use Autodesk Fusion 360 there is parametric models available for both the Classic and FV3 rewinders that will allow customization for unique widths and axle lengths. Please see the Selection Aid table above to help choose.
3. If you're using, or upgrading from a ERCFv1 or v2 version you may want/need a higher torque gear motor.  Many in the Beta team ran NEMA 17's spec'd at 55 N-cm max torque and config'd them for 1-1.5A (probably overkill...).  If running the ERCF V1 or V2 with the 80 tooth gear Grafton's [40 Tooth NEMA 17 Mod](https://www.printables.com/model/692720-ercf-40-tooth-gear-modifiction) is a good modification for gaining more speed from a motor with 40N-cm torque or greater.  This may not be required so if you already have built your ERCF, try the Filamentalist with the motor/gearing you have and decide if you think you need more torque/speed.
4. Because the standard tuning of this design relies on some filament slip at the o-rings, the o-rings may ultimately wear-out.  Testing and extrapolation estimates that the wear-out point is  greater than 5K cycles. See the O-Ring Replacement section in the assembly manuals for o-ring swap/replacement instructions. 
5. Due to pressfits for the axle bearings and ECAS fitting, printer calibration is important.  Calibration "Test Block" stl's are included in the projects/CAD.  It is recommended you print the calibration tool first and test the press fits, M3 thread cutting, M3 slip fit, filament path holes to determine if you need to apply any scaling or changes to your extrusion factors in your slicer before printing.  Due to varying ECAS supplier tolerances and varying printer tolerances some experienced cracking at the ECAS hole when pressing in the ECAS.  If all other press fits work well on the calibration tool but you experience cracking at the ECAS hole when pressing in an ECAS fitting, you can use an Xacto knife to lightly remove some plastic from the ECAS hole.  If the ECAS is too loose you can use superglue to glue the ECAS into the Tensioner Mount (not the Test Block 😉 ).
6. Questions or input?
   - Refer to the [FAQ](https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Filamentalist_FAQ.md)
   - [Troubleshooting Guide](https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/troubleshoot.md)
   - Filamentalist Discord group [here:](https://discord.gg/zHGH9sXFVK)

## <img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Brain_Logo.png" width="50" height="60"> Tuning

Tune by setting the Tensioner Arm clamping force.  The arm does not need an extreme amount of tension.  To tune the spring force, lift the tensioner and insert a section of filament through the o-ring bearing interface and into the bowden tube.  Hold the center roller by placing your thumb against the o-rings and try to pull the filament out.  You want the slip force to be slightly more than what the overall system drag is, so you have to imagine the range of gear motor pull force vs rewinder drag and set a slip range in-between the two "imaginary" lines.  Adjust the spring tensioner screw accordingly and err on the light side.  Run the rewinder (see test code below). If loose filament is forming around the filament spool during unload, tighten the spring tensioning screw.  If no loose filament is forming around the filament roll, gradually reduce the spring tension until loose filament starts to accumulate and then increase tension in ~1/2 screw turn increments until you feel you have the lightest tension that results in a tightly packed unload. 

## <img src="https://github.com/Enraged-Rabbit-Community/ERCF_v2/blob/master/Recommended_Options/Filamentalist_Rewinder/Assets/Filamentalist_Brain_Logo.png" width="50" height="60"> Testing

Below are macros you can cut and paste into the bottom of your mmu_software.cfg or printer.cfg to test and tune your rewinders.

Happy multi-material printing and rewindering!

```
[gcode_macro rewinder_test]
gcode:
    MMU_TEST_LOAD LENGTH=50
    {% for n in range(20) %}

# cycles currently set at 20, i.e. range(20).  You can changes this however you chose.
        MMU_SERVO POS=DOWN
#        MANUAL_STEPPER STEPPER="gear_stepper" SPEED=300 ACCEL=400 MOVE=800
        MMU_TEST_MOVE SPEED=300 ACCEL=400 MOVE=800
# change the SPEED and ACCEL as you see fit
        MMU_SERVO POS=UP
# to stop a macro mid-cycle you must use the e-stop.  This dwell allows you to hit the e-stop while the servo is up so that you can pull the filament out of the ERCF while the printer/macro is stopped
        MMU_SERVO POS=DOWN
        MMU_TEST_MOVE SPEED=300 ACCEL=400 MOVE=-800
        MMU_SERVO POS=UP

    {% endfor %}


[gcode_macro rewinder_test_multitool]
gcode:
    {% set gates = [5] %} # [0,1,2,3,4,5] move between these gates
    {% set test_load_length = params.TEST_LOAD_LENGTH | default(50) | float %}
    {% set repeats = params.REPEATS | default(20) | int %}
    {% set speed = params.SPEED | default(300) | float %}
    {% set accel = params.ACCEL | default(400) | float %}
    {% set length = params.LENGTH | default(800) | float %}

    MMU_HOME

#    MMU_TEST_LOAD LENGTH=50
    {% for n in range(repeats) %}
        {% for gate in gates %}
            MMU_SELECT GATE={gate}
            MMU_TEST_LOAD LENGTH={test_load_length} # preload gate for a bit of length
            MMU_TEST_MOVE SPEED={speed} ACCEL={accel} MOVE={length}
            MMU_SERVO POS=UP
            MMU_TEST_MOVE SPEED={speed} ACCEL={accel} MOVE=-{length}
            MMU_EJECT
            MMU_RECOVER

        {% endfor %}
  
    {% endfor %}
```

